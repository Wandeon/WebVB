# Sprint 0.1: Project Scaffold Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Create a Turborepo monorepo with two Next.js 16 apps and three shared packages, all compiling with TypeScript strict mode.

**Architecture:** Turborepo monorepo with pnpm workspaces. Two apps (web for static public site, admin for SSR dashboard) share UI components, database layer, and utilities via internal packages.

**Tech Stack:** Turborepo, pnpm, Next.js 16, TypeScript 5.x (strict), ESLint, Prettier

---

## Prerequisites (Human Action Required)

Before starting, you must install pnpm. Run in your terminal:

```bash
sudo npm install -g pnpm
```

Verify with: `pnpm --version` (should show 9.x)

---

## Task 1: Initialize Turborepo Monorepo

**Files:**
- Create: `package.json`
- Create: `pnpm-workspace.yaml`
- Create: `turbo.json`
- Create: `.npmrc`

**Step 1: Create root package.json**

```bash
cd /mnt/c/VelikiBukovec_web
```

Create `package.json`:
```json
{
  "name": "velikibukovec",
  "private": true,
  "scripts": {
    "build": "turbo run build",
    "dev": "turbo run dev",
    "lint": "turbo run lint",
    "type-check": "turbo run type-check",
    "test": "turbo run test",
    "clean": "turbo run clean && rm -rf node_modules",
    "db:push": "pnpm --filter @repo/database db:push",
    "db:seed": "pnpm --filter @repo/database db:seed",
    "db:studio": "pnpm --filter @repo/database db:studio"
  },
  "devDependencies": {
    "turbo": "^2.4.0",
    "typescript": "^5.7.0"
  },
  "packageManager": "pnpm@9.15.0",
  "engines": {
    "node": ">=20.0.0"
  }
}
```

**Step 2: Create pnpm-workspace.yaml**

```yaml
packages:
  - "apps/*"
  - "packages/*"
  - "tooling/*"
```

**Step 3: Create turbo.json**

```json
{
  "$schema": "https://turbo.build/schema.json",
  "ui": "tui",
  "tasks": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".next/**", "!.next/cache/**", "dist/**"]
    },
    "dev": {
      "cache": false,
      "persistent": true
    },
    "lint": {
      "dependsOn": ["^build"]
    },
    "type-check": {
      "dependsOn": ["^build"]
    },
    "test": {
      "dependsOn": ["^build"]
    },
    "clean": {
      "cache": false
    }
  }
}
```

**Step 4: Create .npmrc**

```
auto-install-peers=true
strict-peer-dependencies=false
```

**Step 5: Commit**

```bash
git add package.json pnpm-workspace.yaml turbo.json .npmrc
git commit -m "chore: initialize turborepo monorepo"
```

---

## Task 2: Create TypeScript Configuration

**Files:**
- Create: `tooling/typescript/base.json`
- Create: `tooling/typescript/nextjs.json`
- Create: `tooling/typescript/library.json`
- Create: `tooling/typescript/package.json`
- Create: `tsconfig.json` (root)

**Step 1: Create tooling directories**

```bash
mkdir -p tooling/typescript tooling/eslint tooling/prettier
```

**Step 2: Create tooling/typescript/package.json**

```json
{
  "name": "@repo/typescript-config",
  "version": "0.0.0",
  "private": true,
  "license": "MIT",
  "files": ["*.json"]
}
```

**Step 3: Create tooling/typescript/base.json**

```json
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "compilerOptions": {
    "strict": true,
    "strictNullChecks": true,
    "noUncheckedIndexedAccess": true,
    "noImplicitAny": true,
    "noImplicitReturns": true,
    "noImplicitThis": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "exactOptionalPropertyTypes": true,
    "forceConsistentCasingInFileNames": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "moduleResolution": "bundler",
    "module": "ESNext",
    "target": "ES2022",
    "lib": ["ES2022"],
    "resolveJsonModule": true,
    "isolatedModules": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true
  },
  "exclude": ["node_modules", "dist", ".next", "coverage"]
}
```

**Step 4: Create tooling/typescript/nextjs.json**

```json
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "extends": "./base.json",
  "compilerOptions": {
    "lib": ["DOM", "DOM.Iterable", "ES2022"],
    "module": "ESNext",
    "moduleResolution": "bundler",
    "jsx": "preserve",
    "noEmit": true,
    "incremental": true,
    "plugins": [{ "name": "next" }]
  }
}
```

**Step 5: Create tooling/typescript/library.json**

```json
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "extends": "./base.json",
  "compilerOptions": {
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "outDir": "./dist",
    "rootDir": "./src"
  }
}
```

**Step 6: Create root tsconfig.json**

```json
{
  "extends": "./tooling/typescript/base.json",
  "compilerOptions": {
    "baseUrl": "."
  },
  "include": [],
  "exclude": ["node_modules"]
}
```

**Step 7: Commit**

```bash
git add tooling/typescript tsconfig.json
git commit -m "chore: add typescript configuration"
```

---

## Task 3: Create ESLint Configuration

**Files:**
- Create: `tooling/eslint/package.json`
- Create: `tooling/eslint/base.js`
- Create: `tooling/eslint/nextjs.js`
- Create: `tooling/eslint/library.js`

**Step 1: Create tooling/eslint/package.json**

```json
{
  "name": "@repo/eslint-config",
  "version": "0.0.0",
  "private": true,
  "files": ["*.js"],
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^8.0.0",
    "@typescript-eslint/parser": "^8.0.0",
    "eslint": "^9.0.0",
    "eslint-config-next": "^15.0.0",
    "eslint-config-prettier": "^9.0.0",
    "eslint-plugin-import": "^2.29.0"
  }
}
```

**Step 2: Create tooling/eslint/base.js**

```javascript
/** @type {import("eslint").Linter.Config} */
module.exports = {
  extends: [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:@typescript-eslint/recommended-requiring-type-checking",
    "prettier",
  ],
  parser: "@typescript-eslint/parser",
  plugins: ["@typescript-eslint", "import"],
  rules: {
    "@typescript-eslint/no-unused-vars": ["error", { argsIgnorePattern: "^_" }],
    "@typescript-eslint/no-explicit-any": "error",
    "@typescript-eslint/consistent-type-imports": [
      "error",
      { prefer: "type-imports" },
    ],
    "import/order": [
      "error",
      {
        groups: [
          "builtin",
          "external",
          "internal",
          ["parent", "sibling"],
          "index",
          "type",
        ],
        "newlines-between": "always",
        alphabetize: { order: "asc" },
      },
    ],
  },
  ignorePatterns: ["dist", ".next", "node_modules", "*.config.js", "*.config.ts"],
};
```

**Step 3: Create tooling/eslint/nextjs.js**

```javascript
/** @type {import("eslint").Linter.Config} */
module.exports = {
  extends: [
    "./base.js",
    "next/core-web-vitals",
  ],
  rules: {
    "@next/next/no-html-link-for-pages": "off",
  },
};
```

**Step 4: Create tooling/eslint/library.js**

```javascript
/** @type {import("eslint").Linter.Config} */
module.exports = {
  extends: ["./base.js"],
  env: {
    node: true,
  },
};
```

**Step 5: Commit**

```bash
git add tooling/eslint
git commit -m "chore: add eslint configuration"
```

---

## Task 4: Create Prettier Configuration

**Files:**
- Create: `tooling/prettier/package.json`
- Create: `tooling/prettier/index.js`
- Create: `.prettierrc.js` (root)
- Create: `.prettierignore` (root)

**Step 1: Create tooling/prettier/package.json**

```json
{
  "name": "@repo/prettier-config",
  "version": "0.0.0",
  "private": true,
  "main": "index.js",
  "files": ["index.js"],
  "devDependencies": {
    "prettier": "^3.4.0",
    "prettier-plugin-tailwindcss": "^0.6.0"
  }
}
```

**Step 2: Create tooling/prettier/index.js**

```javascript
/** @type {import("prettier").Config} */
module.exports = {
  semi: true,
  singleQuote: true,
  tabWidth: 2,
  trailingComma: "es5",
  printWidth: 100,
  plugins: ["prettier-plugin-tailwindcss"],
};
```

**Step 3: Create root .prettierrc.js**

```javascript
module.exports = require("@repo/prettier-config");
```

**Step 4: Create root .prettierignore**

```
node_modules
.next
dist
coverage
pnpm-lock.yaml
```

**Step 5: Commit**

```bash
git add tooling/prettier .prettierrc.js .prettierignore
git commit -m "chore: add prettier configuration"
```

---

## Task 5: Create packages/shared

**Files:**
- Create: `packages/shared/package.json`
- Create: `packages/shared/tsconfig.json`
- Create: `packages/shared/src/index.ts`
- Create: `packages/shared/src/types/index.ts`
- Create: `packages/shared/src/constants/index.ts`

**Step 1: Create directory structure**

```bash
mkdir -p packages/shared/src/types packages/shared/src/constants packages/shared/src/schemas packages/shared/src/utils
```

**Step 2: Create packages/shared/package.json**

```json
{
  "name": "@repo/shared",
  "version": "0.0.0",
  "private": true,
  "main": "./src/index.ts",
  "types": "./src/index.ts",
  "exports": {
    ".": "./src/index.ts",
    "./types": "./src/types/index.ts",
    "./constants": "./src/constants/index.ts"
  },
  "scripts": {
    "type-check": "tsc --noEmit",
    "lint": "eslint src/",
    "clean": "rm -rf dist node_modules"
  },
  "devDependencies": {
    "@repo/eslint-config": "workspace:*",
    "@repo/typescript-config": "workspace:*",
    "typescript": "^5.7.0"
  }
}
```

**Step 3: Create packages/shared/tsconfig.json**

```json
{
  "extends": "@repo/typescript-config/library.json",
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

**Step 4: Create packages/shared/src/types/index.ts**

```typescript
// Common types used across apps

export type UserRole = 'super_admin' | 'admin' | 'staff';

export interface User {
  id: string;
  email: string;
  name: string;
  role: UserRole;
  createdAt: Date;
  updatedAt: Date;
}

export interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: {
    code: string;
    message: string;
    details?: Record<string, unknown>;
  };
}

export interface PaginatedResponse<T> extends ApiResponse<T[]> {
  pagination: {
    page: number;
    limit: number;
    total: number;
    totalPages: number;
  };
}
```

**Step 5: Create packages/shared/src/constants/index.ts**

```typescript
// App-wide constants

export const APP_NAME = 'Veliki Bukovec';

export const USER_ROLES = {
  SUPER_ADMIN: 'super_admin',
  ADMIN: 'admin',
  STAFF: 'staff',
} as const;

export const NEWS_CATEGORIES = [
  'opcinske-aktualnosti',
  'gospodarstvo',
  'sport',
  'komunalne-teme',
  'kultura',
  'obrazovanje',
  'ostalo',
] as const;

export const PAGINATION = {
  DEFAULT_PAGE: 1,
  DEFAULT_LIMIT: 10,
  MAX_LIMIT: 100,
} as const;
```

**Step 6: Create packages/shared/src/index.ts**

```typescript
// Main entry point - re-export all public APIs

export * from './types';
export * from './constants';
```

**Step 7: Create packages/shared/.eslintrc.js**

```javascript
module.exports = {
  root: true,
  extends: ["@repo/eslint-config/library.js"],
  parserOptions: {
    project: "./tsconfig.json",
    tsconfigRootDir: __dirname,
  },
};
```

**Step 8: Commit**

```bash
git add packages/shared
git commit -m "feat: add @repo/shared package with types and constants"
```

---

## Task 6: Create packages/ui

**Files:**
- Create: `packages/ui/package.json`
- Create: `packages/ui/tsconfig.json`
- Create: `packages/ui/src/index.ts`
- Create: `packages/ui/src/primitives/button.tsx`

**Step 1: Create directory structure**

```bash
mkdir -p packages/ui/src/primitives packages/ui/src/components packages/ui/src/animations packages/ui/src/hooks
```

**Step 2: Create packages/ui/package.json**

```json
{
  "name": "@repo/ui",
  "version": "0.0.0",
  "private": true,
  "main": "./src/index.ts",
  "types": "./src/index.ts",
  "exports": {
    ".": "./src/index.ts",
    "./primitives": "./src/primitives/index.ts",
    "./animations": "./src/animations/index.ts"
  },
  "scripts": {
    "type-check": "tsc --noEmit",
    "lint": "eslint src/",
    "clean": "rm -rf dist node_modules"
  },
  "peerDependencies": {
    "react": "^19.0.0",
    "react-dom": "^19.0.0"
  },
  "devDependencies": {
    "@repo/eslint-config": "workspace:*",
    "@repo/typescript-config": "workspace:*",
    "@types/react": "^19.0.0",
    "@types/react-dom": "^19.0.0",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "typescript": "^5.7.0"
  }
}
```

**Step 3: Create packages/ui/tsconfig.json**

```json
{
  "extends": "@repo/typescript-config/library.json",
  "compilerOptions": {
    "jsx": "react-jsx",
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

**Step 4: Create packages/ui/src/primitives/button.tsx**

```tsx
import type { ButtonHTMLAttributes, ReactNode } from 'react';

export interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  children: ReactNode;
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'danger';
  size?: 'sm' | 'md' | 'lg';
}

/**
 * Basic button component - will be enhanced with Tailwind in Task 0.4
 */
export function Button({
  children,
  variant = 'primary',
  size = 'md',
  className = '',
  ...props
}: ButtonProps) {
  return (
    <button
      className={`btn btn-${variant} btn-${size} ${className}`}
      {...props}
    >
      {children}
    </button>
  );
}
```

**Step 5: Create packages/ui/src/primitives/index.ts**

```typescript
export { Button } from './button';
export type { ButtonProps } from './button';
```

**Step 6: Create packages/ui/src/animations/index.ts**

```typescript
// Animation presets - will be populated in Sprint 0.4

export const fadeIn = {
  initial: { opacity: 0 },
  animate: { opacity: 1 },
  exit: { opacity: 0 },
  transition: { duration: 0.25 },
};

export const fadeInUp = {
  initial: { opacity: 0, y: 20 },
  animate: { opacity: 1, y: 0 },
  exit: { opacity: 0, y: -10 },
  transition: { duration: 0.3 },
};
```

**Step 7: Create packages/ui/src/index.ts**

```typescript
// Main entry point
export * from './primitives';
```

**Step 8: Create packages/ui/.eslintrc.js**

```javascript
module.exports = {
  root: true,
  extends: ["@repo/eslint-config/library.js"],
  parserOptions: {
    project: "./tsconfig.json",
    tsconfigRootDir: __dirname,
  },
};
```

**Step 9: Commit**

```bash
git add packages/ui
git commit -m "feat: add @repo/ui package with button primitive"
```

---

## Task 7: Create packages/database

**Files:**
- Create: `packages/database/package.json`
- Create: `packages/database/tsconfig.json`
- Create: `packages/database/src/index.ts`
- Create: `packages/database/src/client.ts`

**Step 1: Create directory structure**

```bash
mkdir -p packages/database/src/repositories packages/database/prisma
```

**Step 2: Create packages/database/package.json**

```json
{
  "name": "@repo/database",
  "version": "0.0.0",
  "private": true,
  "main": "./src/index.ts",
  "types": "./src/index.ts",
  "exports": {
    ".": "./src/index.ts",
    "./client": "./src/client.ts"
  },
  "scripts": {
    "db:generate": "prisma generate",
    "db:push": "prisma db push",
    "db:seed": "tsx prisma/seed.ts",
    "db:studio": "prisma studio",
    "type-check": "tsc --noEmit",
    "lint": "eslint src/",
    "clean": "rm -rf dist node_modules"
  },
  "dependencies": {
    "@prisma/client": "^6.2.0"
  },
  "devDependencies": {
    "@repo/eslint-config": "workspace:*",
    "@repo/typescript-config": "workspace:*",
    "prisma": "^6.2.0",
    "tsx": "^4.19.0",
    "typescript": "^5.7.0"
  }
}
```

**Step 3: Create packages/database/tsconfig.json**

```json
{
  "extends": "@repo/typescript-config/library.json",
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": ["src/**/*", "prisma/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

**Step 4: Create packages/database/src/client.ts**

```typescript
import { PrismaClient } from '@prisma/client';

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined;
};

export const db =
  globalForPrisma.prisma ??
  new PrismaClient({
    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],
  });

if (process.env.NODE_ENV !== 'production') {
  globalForPrisma.prisma = db;
}
```

**Step 5: Create packages/database/src/index.ts**

```typescript
// Database exports
export { db } from './client';
export * from '@prisma/client';
```

**Step 6: Create placeholder prisma/schema.prisma**

```prisma
// This is a placeholder - full schema will be created in Sprint 0.2
// See docs/DATABASE.md for complete schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Placeholder model to allow initial setup
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

**Step 7: Create packages/database/.eslintrc.js**

```javascript
module.exports = {
  root: true,
  extends: ["@repo/eslint-config/library.js"],
  parserOptions: {
    project: "./tsconfig.json",
    tsconfigRootDir: __dirname,
  },
};
```

**Step 8: Commit**

```bash
git add packages/database
git commit -m "feat: add @repo/database package with prisma setup"
```

---

## Task 8: Create apps/web (Public Site)

**Files:**
- Create: `apps/web/package.json`
- Create: `apps/web/tsconfig.json`
- Create: `apps/web/next.config.ts`
- Create: `apps/web/app/layout.tsx`
- Create: `apps/web/app/page.tsx`
- Create: `apps/web/app/globals.css`

**Step 1: Create directory structure**

```bash
mkdir -p apps/web/app apps/web/components apps/web/lib apps/web/public
```

**Step 2: Create apps/web/package.json**

```json
{
  "name": "@repo/web",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "dev": "next dev --port 3000",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "type-check": "tsc --noEmit",
    "clean": "rm -rf .next node_modules"
  },
  "dependencies": {
    "@repo/shared": "workspace:*",
    "@repo/ui": "workspace:*",
    "next": "^16.1.0",
    "react": "^19.0.0",
    "react-dom": "^19.0.0"
  },
  "devDependencies": {
    "@repo/eslint-config": "workspace:*",
    "@repo/typescript-config": "workspace:*",
    "@types/node": "^22.0.0",
    "@types/react": "^19.0.0",
    "@types/react-dom": "^19.0.0",
    "typescript": "^5.7.0"
  }
}
```

**Step 3: Create apps/web/tsconfig.json**

```json
{
  "extends": "@repo/typescript-config/nextjs.json",
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```

**Step 4: Create apps/web/next.config.ts**

```typescript
import type { NextConfig } from 'next';

const nextConfig: NextConfig = {
  output: 'export',

  // Disable image optimization for static export
  images: {
    unoptimized: true,
  },

  // Transpile workspace packages
  transpilePackages: ['@repo/ui', '@repo/shared'],

  // Strict mode for better debugging
  reactStrictMode: true,
};

export default nextConfig;
```

**Step 5: Create apps/web/app/globals.css**

```css
/* Base styles - Tailwind will be added in Sprint 0.4 */

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: system-ui, -apple-system, sans-serif;
  line-height: 1.5;
}
```

**Step 6: Create apps/web/app/layout.tsx**

```tsx
import type { Metadata } from 'next';
import type { ReactNode } from 'react';

import './globals.css';

export const metadata: Metadata = {
  title: 'Općina Veliki Bukovec',
  description: 'Službena web stranica Općine Veliki Bukovec',
};

export default function RootLayout({ children }: { children: ReactNode }) {
  return (
    <html lang="hr">
      <body>{children}</body>
    </html>
  );
}
```

**Step 7: Create apps/web/app/page.tsx**

```tsx
import { APP_NAME } from '@repo/shared';
import { Button } from '@repo/ui';

export default function HomePage() {
  return (
    <main style={{ padding: '2rem', maxWidth: '800px', margin: '0 auto' }}>
      <h1>{APP_NAME}</h1>
      <p>Dobrodošli na službenu web stranicu Općine Veliki Bukovec.</p>
      <Button variant="primary">Test Button</Button>
    </main>
  );
}
```

**Step 8: Create apps/web/.eslintrc.js**

```javascript
module.exports = {
  root: true,
  extends: ["@repo/eslint-config/nextjs.js"],
  parserOptions: {
    project: "./tsconfig.json",
    tsconfigRootDir: __dirname,
  },
};
```

**Step 9: Commit**

```bash
git add apps/web
git commit -m "feat: add apps/web (public site) with next.js static export"
```

---

## Task 9: Create apps/admin (Admin Panel)

**Files:**
- Create: `apps/admin/package.json`
- Create: `apps/admin/tsconfig.json`
- Create: `apps/admin/next.config.ts`
- Create: `apps/admin/app/layout.tsx`
- Create: `apps/admin/app/page.tsx`
- Create: `apps/admin/app/globals.css`

**Step 1: Create directory structure**

```bash
mkdir -p apps/admin/app apps/admin/components apps/admin/lib apps/admin/public
```

**Step 2: Create apps/admin/package.json**

```json
{
  "name": "@repo/admin",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "dev": "next dev --port 3001",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "type-check": "tsc --noEmit",
    "clean": "rm -rf .next node_modules"
  },
  "dependencies": {
    "@repo/database": "workspace:*",
    "@repo/shared": "workspace:*",
    "@repo/ui": "workspace:*",
    "next": "^16.1.0",
    "react": "^19.0.0",
    "react-dom": "^19.0.0"
  },
  "devDependencies": {
    "@repo/eslint-config": "workspace:*",
    "@repo/typescript-config": "workspace:*",
    "@types/node": "^22.0.0",
    "@types/react": "^19.0.0",
    "@types/react-dom": "^19.0.0",
    "typescript": "^5.7.0"
  }
}
```

**Step 3: Create apps/admin/tsconfig.json**

```json
{
  "extends": "@repo/typescript-config/nextjs.json",
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```

**Step 4: Create apps/admin/next.config.ts**

```typescript
import type { NextConfig } from 'next';

const nextConfig: NextConfig = {
  // Admin uses SSR, not static export

  // Transpile workspace packages
  transpilePackages: ['@repo/ui', '@repo/shared', '@repo/database'],

  // Strict mode for better debugging
  reactStrictMode: true,

  // Server-side features enabled
  experimental: {
    // Enable server actions
    serverActions: {
      bodySizeLimit: '10mb', // For file uploads
    },
  },
};

export default nextConfig;
```

**Step 5: Create apps/admin/app/globals.css**

```css
/* Base styles - Tailwind will be added in Sprint 0.4 */

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: system-ui, -apple-system, sans-serif;
  line-height: 1.5;
}
```

**Step 6: Create apps/admin/app/layout.tsx**

```tsx
import type { Metadata } from 'next';
import type { ReactNode } from 'react';

import './globals.css';

export const metadata: Metadata = {
  title: 'Admin | Veliki Bukovec',
  description: 'Administratorsko sučelje za Općinu Veliki Bukovec',
};

export default function RootLayout({ children }: { children: ReactNode }) {
  return (
    <html lang="hr">
      <body>{children}</body>
    </html>
  );
}
```

**Step 7: Create apps/admin/app/page.tsx**

```tsx
import { APP_NAME } from '@repo/shared';
import { Button } from '@repo/ui';

export default function AdminHomePage() {
  return (
    <main style={{ padding: '2rem', maxWidth: '800px', margin: '0 auto' }}>
      <h1>{APP_NAME} - Admin</h1>
      <p>Administratorsko sučelje. Prijava će biti dodana u Sprint 0.3.</p>
      <Button variant="primary">Test Admin Button</Button>
    </main>
  );
}
```

**Step 8: Create apps/admin/.eslintrc.js**

```javascript
module.exports = {
  root: true,
  extends: ["@repo/eslint-config/nextjs.js"],
  parserOptions: {
    project: "./tsconfig.json",
    tsconfigRootDir: __dirname,
  },
};
```

**Step 9: Commit**

```bash
git add apps/admin
git commit -m "feat: add apps/admin (admin panel) with next.js ssr"
```

---

## Task 10: Create .env.example and Update .gitignore

**Files:**
- Create: `.env.example`
- Update: `.gitignore`

**Step 1: Create .env.example**

```bash
# Database
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/velikibukovec"

# Auth (Better Auth - Sprint 0.3)
BETTER_AUTH_SECRET="generate-with-openssl-rand-base64-32"
BETTER_AUTH_URL="http://localhost:3001"

# Google OAuth (Sprint 0.3)
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# Cloudflare R2 (Sprint 1.5)
R2_ACCOUNT_ID=""
R2_ACCESS_KEY_ID=""
R2_SECRET_ACCESS_KEY=""
R2_BUCKET_NAME="velikibukovec-media"

# Ollama Cloud (Phase 6)
OLLAMA_CLOUD_URL="https://api.ollama.ai"
OLLAMA_CLOUD_API_KEY=""

# Google Search API (Phase 6)
GOOGLE_SEARCH_API_KEY=""
GOOGLE_SEARCH_CX=""

# Email (Phase 5)
SMTP_HOST=""
SMTP_PORT="587"
SMTP_USER=""
SMTP_PASSWORD=""

# Monitoring (Phase 8)
SENTRY_DSN=""

# Environment
NODE_ENV="development"
```

**Step 2: Update .gitignore**

```gitignore
# Dependencies
node_modules
.pnpm-store

# Build outputs
.next
dist
out
build

# Environment
.env
.env.local
.env.*.local
!.env.example

# IDE
.idea
.vscode
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Logs
*.log
npm-debug.log*
pnpm-debug.log*

# Testing
coverage
.nyc_output

# Turbo
.turbo

# Prisma
prisma/*.db
prisma/*.db-journal

# Misc
*.tsbuildinfo
```

**Step 3: Commit**

```bash
git add .env.example .gitignore
git commit -m "chore: add .env.example and update .gitignore"
```

---

## Task 11: Install Dependencies and Verify Build

**Step 1: Install all dependencies**

```bash
cd /mnt/c/VelikiBukovec_web
pnpm install
```

Expected: Dependencies install for all workspaces

**Step 2: Run type-check**

```bash
pnpm type-check
```

Expected: All packages pass type checking

**Step 3: Run lint**

```bash
pnpm lint
```

Expected: No linting errors

**Step 4: Run build**

```bash
pnpm build
```

Expected: Both apps build successfully

**Step 5: Test dev servers**

Terminal 1:
```bash
pnpm --filter @repo/web dev
```
Open http://localhost:3000 - should show "Veliki Bukovec" with a button

Terminal 2:
```bash
pnpm --filter @repo/admin dev
```
Open http://localhost:3001 - should show "Veliki Bukovec - Admin" with a button

**Step 6: Final commit**

```bash
git add pnpm-lock.yaml
git commit -m "chore: install dependencies and verify build"
```

---

## Sprint 0.1 Gate Verification

Run all checks:

```bash
pnpm build && pnpm lint && pnpm type-check
```

**Expected output:** All commands succeed with no errors.

**Checklist:**
- [ ] `pnpm build` completes for both apps
- [ ] `pnpm lint` passes with no errors
- [ ] `pnpm type-check` passes
- [ ] http://localhost:3000 shows public site
- [ ] http://localhost:3001 shows admin site
- [ ] Button component from @repo/ui renders in both apps
- [ ] Constants from @repo/shared work in both apps

---

## Final Commit and Push

```bash
git add -A
git commit -m "feat(sprint-0.1): complete project scaffold

- Turborepo monorepo with pnpm workspaces
- TypeScript strict mode configuration
- ESLint + Prettier setup
- packages/shared with types and constants
- packages/ui with Button primitive
- packages/database with Prisma placeholder
- apps/web (Next.js 16 static export)
- apps/admin (Next.js 16 SSR)

Gate: pnpm build && pnpm lint && pnpm type-check

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"

git push
```

---

## Summary

| Task | Files Created | Purpose |
|------|---------------|---------|
| 1 | Root configs | Turborepo monorepo setup |
| 2 | tooling/typescript | Shared TS configs |
| 3 | tooling/eslint | Shared ESLint configs |
| 4 | tooling/prettier | Shared Prettier config |
| 5 | packages/shared | Types and constants |
| 6 | packages/ui | UI components |
| 7 | packages/database | Prisma setup |
| 8 | apps/web | Public site |
| 9 | apps/admin | Admin panel |
| 10 | .env, .gitignore | Environment setup |
| 11 | - | Install and verify |

**Total commits:** 11
**Estimated time:** 45-60 minutes

