# Sprint 0.2: Database Schema Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Create the complete PostgreSQL database schema with Better Auth tables, content tables, and pgvector support for the RAG chatbot.

**Architecture:** Prisma ORM with PostgreSQL. Better Auth provides standard auth tables (user, session, account, verification) plus plugin tables (passkey, twoFactor). Custom tables handle content (posts, documents, events, pages, galleries), communication (contact, problems, newsletter), and system features (embeddings, search, AI queue).

**Tech Stack:** Prisma 6.x, PostgreSQL 15+, pgvector extension, Better Auth schema conventions

---

## Prerequisites

Before starting, ensure you have:
1. PostgreSQL 15+ running locally (or Docker)
2. pgvector extension installed: `CREATE EXTENSION IF NOT EXISTS vector;`
3. A database created: `CREATE DATABASE velikibukovec;`
4. DATABASE_URL in `.env.local`: `postgresql://postgres:postgres@localhost:5432/velikibukovec`

To install pgvector locally (Ubuntu/WSL):
```bash
sudo apt install postgresql-15-pgvector
```

Or with Docker:
```bash
docker run --name vb-postgres -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=velikibukovec -p 5432:5432 -d pgvector/pgvector:pg15
```

---

## Task 1: Enable pgvector Extension

**Files:**
- Create: `packages/database/prisma/migrations/0_init/migration.sql`

**Step 1: Create migrations directory**

```bash
mkdir -p /mnt/c/VelikiBukovec_web/packages/database/prisma/migrations/0_init
```

**Step 2: Create initial migration SQL**

Create `packages/database/prisma/migrations/0_init/migration.sql`:
```sql
-- Enable pgvector extension for embedding storage
CREATE EXTENSION IF NOT EXISTS vector;

-- Enable pg_trgm for fuzzy text search
CREATE EXTENSION IF NOT EXISTS pg_trgm;
```

**Step 3: Commit**

```bash
git add packages/database/prisma/migrations
git commit -m "chore: add initial migration for pgvector extension"
```

---

## Task 2: Create Better Auth Schema

**Files:**
- Modify: `packages/database/prisma/schema.prisma`

**Step 1: Replace placeholder schema with Better Auth tables**

Replace entire contents of `packages/database/prisma/schema.prisma`:

```prisma
// Prisma Schema for Veliki Bukovec
// See docs/DATABASE.md for full documentation

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  extensions = [vector, pg_trgm]
}

// ============================================================================
// BETTER AUTH TABLES (Standard Schema)
// ============================================================================

model User {
  id            String    @id @default(cuid())
  name          String
  email         String    @unique
  emailVerified Boolean   @default(false)
  image         String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  // Custom extension field
  role          String    @default("staff") // 'super_admin', 'admin', 'staff'

  // Relations
  sessions      Session[]
  accounts      Account[]
  passkeys      Passkey[]
  twoFactor     TwoFactor?

  // Content relations
  posts         Post[]
  documents     Document[]
  contactReplies ContactMessage[] @relation("RepliedBy")
  problemResolutions ProblemReport[] @relation("ResolvedBy")
  aiRequests    AiQueue[]

  @@index([email])
  @@index([role])
  @@map("user")
}

model Session {
  id        String   @id @default(cuid())
  userId    String
  token     String   @unique
  expiresAt DateTime
  ipAddress String?
  userAgent String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([token])
  @@map("session")
}

model Account {
  id                    String    @id @default(cuid())
  userId                String
  accountId             String
  providerId            String    // 'google', 'credential'
  accessToken           String?
  refreshToken          String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  idToken               String?
  password              String?   // For credential provider (hashed)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@map("account")
}

model Verification {
  id         String   @id @default(cuid())
  identifier String   // email or other identifier
  value      String   // token value
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("verification")
}

// ============================================================================
// BETTER AUTH PLUGIN TABLES
// ============================================================================

model Passkey {
  id           String   @id @default(cuid())
  userId       String
  name         String?  // User-friendly name "MacBook Touch ID"
  publicKey    String
  credentialID String   @unique
  counter      Int      @default(0)
  deviceType   String?  // 'platform' or 'cross-platform'
  backedUp     Boolean  @default(false)
  transports   String?  // JSON array of transports
  createdAt    DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([credentialID])
  @@map("passkey")
}

model TwoFactor {
  id          String   @id @default(cuid())
  userId      String   @unique
  secret      String   // Encrypted TOTP secret
  backupCodes String?  // Encrypted backup codes (JSON)
  createdAt   DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("two_factor")
}
```

**Step 2: Commit**

```bash
git add packages/database/prisma/schema.prisma
git commit -m "feat(db): add Better Auth schema tables"
```

---

## Task 3: Add Content Tables

**Files:**
- Modify: `packages/database/prisma/schema.prisma`

**Step 1: Append content tables to schema.prisma**

Add to the end of `packages/database/prisma/schema.prisma`:

```prisma
// ============================================================================
// CONTENT TABLES
// ============================================================================

model Post {
  id             String    @id @default(uuid())
  title          String
  slug           String    @unique
  content        String    // Rich text (TipTap HTML)
  excerpt        String?   // Short summary
  featuredImage  String?   @map("featured_image") // R2 URL
  images         Json?     // Additional images [{url, caption}]
  category       String    @default("aktualnosti")
  isFeatured     Boolean   @default(false) @map("is_featured")
  facebookPostId String?   @map("facebook_post_id")
  authorId       String?   @map("author_id")
  publishedAt    DateTime? @map("published_at")
  createdAt      DateTime  @default(now()) @map("created_at")
  updatedAt      DateTime  @updatedAt @map("updated_at")

  author User? @relation(fields: [authorId], references: [id])

  @@index([publishedAt(sort: Desc)])
  @@index([category])
  @@index([isFeatured])
  @@index([authorId])
  @@map("posts")
}

model Document {
  id          String   @id @default(uuid())
  title       String
  fileUrl     String   @map("file_url") // R2 URL
  fileSize    Int?     @map("file_size")
  category    String   // 'sjednice', 'izbori', 'planovi', etc.
  subcategory String?
  year        Int?
  uploadedBy  String?  @map("uploaded_by")
  createdAt   DateTime @default(now()) @map("created_at")

  uploader User? @relation(fields: [uploadedBy], references: [id])

  @@index([category, year(sort: Desc)])
  @@map("documents")
}

model Event {
  id          String    @id @default(uuid())
  title       String
  description String?
  eventDate   DateTime  @map("event_date") @db.Date
  eventTime   DateTime? @map("event_time") @db.Time()
  endDate     DateTime? @map("end_date") @db.Date
  location    String?
  posterImage String?   @map("poster_image") // R2 URL
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")

  @@index([eventDate])
  @@map("events")
}

model Page {
  id        String   @id @default(uuid())
  title     String
  slug      String   @unique
  content   String
  parentId  String?  @map("parent_id")
  menuOrder Int      @default(0) @map("menu_order")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  parent   Page?  @relation("PageHierarchy", fields: [parentId], references: [id])
  children Page[] @relation("PageHierarchy")

  @@index([parentId])
  @@map("pages")
}

model Gallery {
  id          String    @id @default(uuid())
  name        String
  slug        String    @unique
  eventDate   DateTime? @map("event_date") @db.Date
  description String?
  coverImage  String?   @map("cover_image") // R2 URL
  createdAt   DateTime  @default(now()) @map("created_at")

  images GalleryImage[]

  @@index([eventDate(sort: Desc)])
  @@map("galleries")
}

model GalleryImage {
  id           String   @id @default(uuid())
  galleryId    String   @map("gallery_id")
  imageUrl     String   @map("image_url") // R2 URL (large)
  thumbnailUrl String?  @map("thumbnail_url") // R2 URL (thumbnail)
  caption      String?
  sortOrder    Int      @default(0) @map("sort_order")
  createdAt    DateTime @default(now()) @map("created_at")

  gallery Gallery @relation(fields: [galleryId], references: [id], onDelete: Cascade)

  @@index([galleryId, sortOrder])
  @@map("gallery_images")
}
```

**Step 2: Commit**

```bash
git add packages/database/prisma/schema.prisma
git commit -m "feat(db): add content tables (posts, documents, events, pages, galleries)"
```

---

## Task 4: Add Communication Tables

**Files:**
- Modify: `packages/database/prisma/schema.prisma`

**Step 1: Append communication tables to schema.prisma**

Add to the end of `packages/database/prisma/schema.prisma`:

```prisma
// ============================================================================
// COMMUNICATION TABLES
// ============================================================================

model ContactMessage {
  id        String    @id @default(uuid())
  name      String
  email     String
  subject   String?
  message   String
  status    String    @default("new") // 'new', 'read', 'replied', 'archived'
  repliedAt DateTime? @map("replied_at")
  repliedBy String?   @map("replied_by")
  ipAddress String?   @map("ip_address")
  createdAt DateTime  @default(now()) @map("created_at")

  replier User? @relation("RepliedBy", fields: [repliedBy], references: [id])

  @@index([status, createdAt(sort: Desc)])
  @@map("contact_messages")
}

model ProblemReport {
  id              String    @id @default(uuid())
  reporterName    String?   @map("reporter_name")
  reporterEmail   String?   @map("reporter_email")
  reporterPhone   String?   @map("reporter_phone")
  problemType     String    @map("problem_type") // 'cesta', 'rasvjeta', 'otpad', 'komunalno', 'ostalo'
  location        String
  description     String
  images          Json?     // [{url, caption}] R2 URLs
  status          String    @default("new") // 'new', 'in_progress', 'resolved', 'rejected'
  resolutionNotes String?   @map("resolution_notes")
  resolvedAt      DateTime? @map("resolved_at")
  resolvedBy      String?   @map("resolved_by")
  ipAddress       String?   @map("ip_address")
  createdAt       DateTime  @default(now()) @map("created_at")

  resolver User? @relation("ResolvedBy", fields: [resolvedBy], references: [id])

  @@index([status, createdAt(sort: Desc)])
  @@map("problem_reports")
}

model NewsletterSubscriber {
  id                String    @id @default(uuid())
  email             String    @unique
  confirmed         Boolean   @default(false)
  confirmationToken String?   @map("confirmation_token")
  confirmedAt       DateTime? @map("confirmed_at")
  unsubscribedAt    DateTime? @map("unsubscribed_at")
  createdAt         DateTime  @default(now()) @map("created_at")

  @@index([confirmed])
  @@map("newsletter_subscribers")
}

model NewsletterSend {
  id             String   @id @default(uuid())
  subject        String
  contentHtml    String   @map("content_html")
  contentText    String   @map("content_text")
  sentAt         DateTime @default(now()) @map("sent_at")
  recipientCount Int?     @map("recipient_count")
  postsIncluded  Json?    @map("posts_included") // [{id, title}]
  eventsIncluded Json?    @map("events_included") // [{id, title}]
  isManual       Boolean  @default(false) @map("is_manual")

  @@map("newsletter_sends")
}
```

**Step 2: Commit**

```bash
git add packages/database/prisma/schema.prisma
git commit -m "feat(db): add communication tables (contact, problems, newsletter)"
```

---

## Task 5: Add System Tables

**Files:**
- Modify: `packages/database/prisma/schema.prisma`

**Step 1: Append system tables to schema.prisma**

Add to the end of `packages/database/prisma/schema.prisma`:

```prisma
// ============================================================================
// SYSTEM TABLES
// ============================================================================

model Setting {
  key       String   @id
  value     Json
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  @@map("settings")
}

model Embedding {
  id         String                 @id @default(uuid())
  sourceType String                 @map("source_type") // 'document', 'page', 'post'
  sourceId   String                 @map("source_id")
  chunkIndex Int                    @map("chunk_index")
  chunkText  String                 @map("chunk_text")
  embedding  Unsupported("vector(768)")?
  createdAt  DateTime               @default(now()) @map("created_at")

  @@index([sourceType, sourceId])
  @@map("embeddings")
}

model SearchIndex {
  id           String                 @id @default(uuid())
  sourceType   String                 @map("source_type") // 'post', 'document', 'page', 'event'
  sourceId     String                 @map("source_id")
  title        String
  contentText  String                 @map("content_text")
  category     String?
  url          String
  publishedAt  DateTime?              @map("published_at")
  searchVector Unsupported("tsvector")? @map("search_vector")
  embedding    Unsupported("vector(768)")?
  updatedAt    DateTime               @default(now()) @updatedAt @map("updated_at")

  @@index([sourceType, sourceId])
  @@map("search_index")
}

model AiQueue {
  id           String    @id @default(uuid())
  userId       String?   @map("user_id")
  requestType  String    @map("request_type") // 'post_generation', 'chat'
  inputData    Json      @map("input_data")
  status       String    @default("pending") // 'pending', 'processing', 'completed', 'failed'
  result       Json?
  errorMessage String?   @map("error_message")
  attempts     Int       @default(0)
  maxAttempts  Int       @default(3) @map("max_attempts")
  createdAt    DateTime  @default(now()) @map("created_at")
  processedAt  DateTime? @map("processed_at")

  user User? @relation(fields: [userId], references: [id])

  @@index([status, createdAt])
  @@map("ai_queue")
}
```

**Step 2: Commit**

```bash
git add packages/database/prisma/schema.prisma
git commit -m "feat(db): add system tables (settings, embeddings, search, ai_queue)"
```

---

## Task 6: Update Shared Types

**Files:**
- Modify: `packages/shared/src/types/index.ts`
- Modify: `packages/shared/src/constants/index.ts`

**Step 1: Update types to match database schema**

Replace contents of `packages/shared/src/types/index.ts`:

```typescript
// Common types used across apps
// These mirror the Prisma schema for use in frontend code

export type UserRole = 'super_admin' | 'admin' | 'staff';

export interface User {
  id: string;
  name: string;
  email: string;
  emailVerified: boolean;
  image: string | null;
  role: UserRole;
  createdAt: Date;
  updatedAt: Date;
}

export type PostCategory =
  | 'aktualnosti'
  | 'gospodarstvo'
  | 'sport'
  | 'komunalno'
  | 'kultura'
  | 'obrazovanje'
  | 'ostalo';

export type ProblemType = 'cesta' | 'rasvjeta' | 'otpad' | 'komunalno' | 'ostalo';

export type ContactStatus = 'new' | 'read' | 'replied' | 'archived';

export type ProblemStatus = 'new' | 'in_progress' | 'resolved' | 'rejected';

export type AiQueueStatus = 'pending' | 'processing' | 'completed' | 'failed';

export interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: {
    code: string;
    message: string;
    details?: Record<string, unknown>;
  };
}

export interface PaginatedResponse<T> extends ApiResponse<T[]> {
  pagination: {
    page: number;
    limit: number;
    total: number;
    totalPages: number;
  };
}

export interface ImageData {
  url: string;
  caption?: string;
}
```

**Step 2: Update constants**

Replace contents of `packages/shared/src/constants/index.ts`:

```typescript
// App-wide constants matching database constraints

export const APP_NAME = 'Veliki Bukovec';

export const USER_ROLES = {
  SUPER_ADMIN: 'super_admin',
  ADMIN: 'admin',
  STAFF: 'staff',
} as const;

export const POST_CATEGORIES = [
  'aktualnosti',
  'gospodarstvo',
  'sport',
  'komunalno',
  'kultura',
  'obrazovanje',
  'ostalo',
] as const;

export const POST_CATEGORY_LABELS: Record<string, string> = {
  aktualnosti: 'Aktualnosti',
  gospodarstvo: 'Gospodarstvo',
  sport: 'Sport',
  komunalno: 'Komunalno',
  kultura: 'Kultura',
  obrazovanje: 'Obrazovanje',
  ostalo: 'Ostalo',
};

export const PROBLEM_TYPES = [
  'cesta',
  'rasvjeta',
  'otpad',
  'komunalno',
  'ostalo',
] as const;

export const PROBLEM_TYPE_LABELS: Record<string, string> = {
  cesta: 'Problem s cestom',
  rasvjeta: 'Javna rasvjeta',
  otpad: 'Otpad i čistoća',
  komunalno: 'Komunalna infrastruktura',
  ostalo: 'Ostalo',
};

export const CONTACT_STATUSES = ['new', 'read', 'replied', 'archived'] as const;

export const PROBLEM_STATUSES = ['new', 'in_progress', 'resolved', 'rejected'] as const;

export const DOCUMENT_CATEGORIES = [
  'sjednice',
  'izbori',
  'planovi',
  'proracun',
  'natjecaji',
  'ostalo',
] as const;

export const PAGINATION = {
  DEFAULT_PAGE: 1,
  DEFAULT_LIMIT: 10,
  MAX_LIMIT: 100,
} as const;
```

**Step 3: Commit**

```bash
git add packages/shared/src/types/index.ts packages/shared/src/constants/index.ts
git commit -m "feat(shared): update types and constants to match database schema"
```

---

## Task 7: Create Seed Script

**Files:**
- Create: `packages/database/prisma/seed.ts`

**Step 1: Create seed script**

Create `packages/database/prisma/seed.ts`:

```typescript
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
  console.log('Seeding database...');

  // Create test admin user
  const adminUser = await prisma.user.upsert({
    where: { email: 'admin@velikibukovec.hr' },
    update: {},
    create: {
      email: 'admin@velikibukovec.hr',
      name: 'Admin',
      role: 'super_admin',
      emailVerified: true,
    },
  });

  console.log('Created admin user:', adminUser.email);

  // Create test staff user
  const staffUser = await prisma.user.upsert({
    where: { email: 'staff@velikibukovec.hr' },
    update: {},
    create: {
      email: 'staff@velikibukovec.hr',
      name: 'Staff Member',
      role: 'staff',
      emailVerified: true,
    },
  });

  console.log('Created staff user:', staffUser.email);

  // Create initial settings
  const settings = [
    { key: 'site_name', value: { hr: 'Općina Veliki Bukovec' } },
    { key: 'site_description', value: { hr: 'Službena web stranica Općine Veliki Bukovec' } },
    { key: 'contact_email', value: 'info@velikibukovec.hr' },
    { key: 'contact_phone', value: '+385 42 XXX XXX' },
    { key: 'contact_address', value: 'Veliki Bukovec XX, 42231 Veliki Bukovec' },
    { key: 'social_facebook', value: 'https://facebook.com/opcinaveliki.bukovec' },
    { key: 'newsletter_enabled', value: true },
    { key: 'ai_generation_enabled', value: false },
  ];

  for (const setting of settings) {
    await prisma.setting.upsert({
      where: { key: setting.key },
      update: { value: setting.value },
      create: setting,
    });
  }

  console.log('Created initial settings');

  // Create sample page
  const aboutPage = await prisma.page.upsert({
    where: { slug: 'o-opcini' },
    update: {},
    create: {
      title: 'O Općini',
      slug: 'o-opcini',
      content: JSON.stringify({
        type: 'doc',
        content: [
          {
            type: 'paragraph',
            content: [{ type: 'text', text: 'Dobrodošli u Općinu Veliki Bukovec.' }],
          },
        ],
      }),
      menuOrder: 1,
    },
  });

  console.log('Created sample page:', aboutPage.slug);

  console.log('Seeding completed!');
}

main()
  .then(async () => {
    await prisma.$disconnect();
  })
  .catch(async (e) => {
    console.error(e);
    await prisma.$disconnect();
    process.exit(1);
  });
```

**Step 2: Commit**

```bash
git add packages/database/prisma/seed.ts
git commit -m "feat(db): add seed script with test users and initial settings"
```

---

## Task 8: Update .env.example

**Files:**
- Modify: `.env.example`

**Step 1: Ensure DATABASE_URL is properly documented**

The `.env.example` already has DATABASE_URL, but let's verify the format is correct. Check that it contains:

```bash
# Database
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/velikibukovec"
```

If the format is different, update it. No commit needed if already correct.

---

## Task 9: Generate Prisma Client and Push Schema

**Files:**
- Generated: `node_modules/.prisma/client`
- Database: All tables created

**Step 1: Create .env.local if not exists**

```bash
cd /mnt/c/VelikiBukovec_web
cp .env.example .env.local
```

Edit `.env.local` and set your actual DATABASE_URL.

**Step 2: Push schema to database**

```bash
cd /mnt/c/VelikiBukovec_web
pnpm --filter @repo/database db:push
```

Expected output: Tables created successfully (may show warnings about Unsupported types which is OK for pgvector).

**Step 3: Generate Prisma client**

```bash
pnpm --filter @repo/database db:generate
```

Expected output: Prisma client generated.

**Step 4: Run seed**

```bash
pnpm --filter @repo/database db:seed
```

Expected output:
```
Seeding database...
Created admin user: admin@velikibukovec.hr
Created staff user: staff@velikibukovec.hr
Created initial settings
Created sample page: o-opcini
Seeding completed!
```

**Step 5: Commit lockfile changes**

```bash
git add pnpm-lock.yaml
git commit -m "chore: update lockfile after prisma generate"
```

---

## Task 10: Verify Type-Check and Lint

**Step 1: Run type-check**

```bash
pnpm type-check
```

Expected: All packages pass.

**Step 2: Run lint**

```bash
pnpm lint
```

Expected: All packages pass (may have warnings for Unsupported types in schema which is acceptable).

**Step 3: Fix any issues**

If there are ESLint errors in the seed file, add eslint-disable comments as needed for Prisma-specific patterns.

---

## Task 11: Update Documentation

**Files:**
- Modify: `ROADMAP.md`
- Modify: `CHANGELOG.md`

**Step 1: Update ROADMAP.md Sprint 0.2 status**

Find the Sprint 0.2 line and update:
- Change `0.2 ⬜` to `0.2 ✅`
- Update "Active Sprint" to show 0.2 completed

**Step 2: Update CHANGELOG.md**

Add to the "Unreleased" section:

```markdown
- Completed Sprint 0.2: Database schema with Better Auth tables, content tables, and pgvector support.
```

**Step 3: Commit**

```bash
git add ROADMAP.md CHANGELOG.md
git commit -m "docs: mark Sprint 0.2 as complete"
```

---

## Task 12: Final Commit and Push

**Step 1: Final commit with summary**

```bash
git add -A
git commit -m "feat(sprint-0.2): complete database schema

- Better Auth tables (user, session, account, verification, passkey, twoFactor)
- Content tables (posts, documents, events, pages, galleries)
- Communication tables (contact_messages, problem_reports, newsletter)
- System tables (settings, embeddings, search_index, ai_queue)
- pgvector extension for RAG embeddings
- Seed script with test users and initial settings
- Updated shared types and constants

Gate: pnpm db:push && pnpm db:seed

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"
```

**Step 2: Push**

```bash
git push
```

---

## Sprint 0.2 Gate Verification

Run gate commands:

```bash
pnpm --filter @repo/database db:push && pnpm --filter @repo/database db:seed
```

**Checklist:**
- [ ] `db:push` creates all tables without errors
- [ ] `db:seed` runs and creates test data
- [ ] `pnpm type-check` passes
- [ ] `pnpm lint` passes
- [ ] Prisma Studio shows all tables: `pnpm db:studio`

---

## Summary

| Task | Files | Purpose |
|------|-------|---------|
| 1 | migrations/0_init | Enable pgvector extension |
| 2 | schema.prisma | Better Auth tables |
| 3 | schema.prisma | Content tables |
| 4 | schema.prisma | Communication tables |
| 5 | schema.prisma | System tables |
| 6 | shared/types, constants | Update frontend types |
| 7 | prisma/seed.ts | Seed script |
| 8 | .env.example | Verify DATABASE_URL |
| 9 | - | Generate client, push, seed |
| 10 | - | Verify type-check and lint |
| 11 | ROADMAP, CHANGELOG | Update documentation |
| 12 | - | Final commit and push |

**Total commits:** ~10
**Database tables:** 19 total
