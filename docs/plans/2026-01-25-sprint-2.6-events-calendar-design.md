# Sprint 2.6 - Events Calendar Design

**Created:** 2026-01-25
**Sprint:** 2.6 - Events Calendar
**Status:** Approved

---

## Overview

Public events calendar page at `/dogadanja` with monthly calendar view, event list, and dedicated event detail pages. Users can browse upcoming and past events, view them on a calendar grid, and add events to their personal calendars.

## Routes

- `/dogadanja` - Main events page with calendar and list
- `/dogadanja/[id]` - Event detail page

## Design Decisions

| Decision | Choice | Rationale |
|----------|--------|-----------|
| Calendar library | @fullcalendar/react | Full-featured, well-maintained, customizable |
| Event details | Dedicated page | SEO-friendly, shareable URLs, consistent with /vijesti pattern |
| Add to Calendar | Google Calendar + ICS | Covers most users with 2 options, no API keys needed |
| Event organization | Tabs (Upcoming/Past) | Clear separation, discoverable |
| Location display | Google Maps link | No API key, no bundle size, works for all locations |
| Calendar event labels | First word of title | Simple, no database changes needed |

---

## Page Layouts

### Main Events Page (`/dogadanja`)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Povratak na poÄetnu                      â”‚
â”‚                                             â”‚
â”‚  DogaÄ‘anja                                  â”‚
â”‚  Kalendar dogaÄ‘anja OpÄ‡ine Veliki Bukovec   â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  NadolazeÄ‡i  â”‚ â”‚   ProÅ¡li     â”‚   Tabs   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      FullCalendar Month View        â”‚    â”‚
â”‚  â”‚   < SijeÄanj 2026 >                 â”‚    â”‚
â”‚  â”‚   Po Ut Sr ÄŒe Pe Su Ne              â”‚    â”‚
â”‚  â”‚   Events show first word of title   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Event List (filtered by selection) â”‚    â”‚
â”‚  â”‚  - EventCard                        â”‚    â”‚
â”‚  â”‚  - EventCard                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**URL State:**
- `?tab=upcoming|past` - Active tab (default: upcoming)
- `?mjesec=2026-01` - Calendar month

### Event Detail Page (`/dogadanja/[id]`)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Povratak na dogaÄ‘anja                    â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Poster Image (if exists)           â”‚    â”‚
â”‚  â”‚  Full width hero                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚  15    â”‚  Sjednica OpÄ‡inskog vijeÄ‡a      â”‚
â”‚  â”‚  sij   â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                             â”‚
â”‚  ğŸ“… Srijeda, 15. sijeÄnja 2026. u 18:00     â”‚
â”‚  ğŸ“ OpÄ‡inska vijeÄ‡nica, Veliki Bukovec      â”‚
â”‚     [PrikaÅ¾i na karti â†’]                    â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Dodaj u kalendar                    â”‚    â”‚
â”‚  â”‚ [Google Calendar] [Preuzmi ICS]     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                             â”‚
â”‚  Opis dogaÄ‘anja                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  <event description prose content>          â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Components

### New UI Components

| Component | Location | Description |
|-----------|----------|-------------|
| `EventCalendar` | `packages/ui` | FullCalendar wrapper with Croatian locale, design system styling |
| `EventTabs` | `packages/ui` | Tab switcher (Upcoming/Past) with URL state persistence |
| `AddToCalendar` | `packages/ui` | Google Calendar link + ICS download buttons |
| `EventHero` | `packages/ui` | Detail page hero with poster image |

### Existing Components to Reuse

- `EventCard` - Already exists, links to `/dogadanja/[id]`
- `FadeIn` - Animation wrapper
- `Button` - For calendar buttons

---

## Data Flow

### Events Page (Server Component)

```
/dogadanja
  â”œâ”€â”€ Read URL params (tab, mjesec)
  â”œâ”€â”€ Fetch events based on tab (upcoming: eventDate >= today, past: eventDate < today)
  â”œâ”€â”€ Fetch events for calendar month
  â””â”€â”€ Render:
      â”œâ”€â”€ EventTabs (client) - handles tab switching via URL
      â”œâ”€â”€ EventCalendar (client) - displays month with events
      â””â”€â”€ Event list with EventCards
```

### Event Detail Page (Server Component)

```
/dogadanja/[id]
  â”œâ”€â”€ Fetch event by ID
  â”œâ”€â”€ If not found â†’ notFound()
  â”œâ”€â”€ Generate metadata (title, description, OG image)
  â””â”€â”€ Render:
      â”œâ”€â”€ EventHero (if poster exists)
      â”œâ”€â”€ Date badge + title
      â”œâ”€â”€ Date/time display
      â”œâ”€â”€ Location with Google Maps link
      â”œâ”€â”€ AddToCalendar buttons
      â””â”€â”€ Description (prose styling)
```

---

## Repository Methods

### Existing (reuse)
- `eventsRepository.findById(id)` - Get single event
- `eventsRepository.findAll({ upcoming: true })` - Get upcoming events
- `eventsRepository.getUpcomingEvents(limit)` - Homepage widget

### New
- `eventsRepository.getEventsByMonth(year, month)` - Get all events in a specific month for calendar display
- `eventsRepository.getPastEvents(options)` - Get past events with pagination

---

## Calendar Configuration

**Packages:**
- `@fullcalendar/core`
- `@fullcalendar/react`
- `@fullcalendar/daygrid`

**Settings:**
- View: `dayGridMonth`
- Locale: `hr` (Croatian)
- First day of week: Monday (1)
- Header: `{ left: 'prev', center: 'title', right: 'next' }`
- Events: Show first word of title in cells

**Styling:**
- Override CSS variables to match design system
- Primary color for today highlight
- Neutral colors for grid

**Interactions:**
- Click event in calendar â†’ navigate to `/dogadanja/[id]`
- Click day â†’ filter list to that day (optional enhancement)
- Prev/Next â†’ update `?mjesec` param

---

## Add to Calendar

### Google Calendar Link

```
https://calendar.google.com/calendar/render?action=TEMPLATE
  &text={title}
  &dates={startISO}/{endISO}
  &details={description}
  &location={location}
```

### ICS File Download

Generate .ics file with:
- VEVENT with DTSTART, DTEND, SUMMARY, DESCRIPTION, LOCATION
- PRODID for OpÄ‡ina Veliki Bukovec
- Filename: `{slug}-event.ics`

---

## Error Handling

| Scenario | Behavior |
|----------|----------|
| No upcoming events | Show "Trenutno nema nadolazeÄ‡ih dogaÄ‘anja." |
| No past events | Show "Nema proÅ¡lih dogaÄ‘anja." |
| Event not found | Return 404, show error page |
| Invalid month param | Default to current month |
| No poster image | Skip hero, show title directly |
| No location | Hide location row and map link |
| No description | Hide description section |

---

## Mobile Considerations

- Calendar: Compressed grid, touch-friendly, swipe for month navigation
- Tabs: Full-width stacked buttons
- Add to Calendar: Stack buttons vertically
- Event list: Full-width cards

---

## SEO & Metadata

**Events Page:**
- Title: "DogaÄ‘anja - OpÄ‡ina Veliki Bukovec"
- Description: "Kalendar dogaÄ‘anja i aktivnosti u OpÄ‡ini Veliki Bukovec"

**Event Detail Page:**
- Title: `{event.title} - DogaÄ‘anja - OpÄ‡ina Veliki Bukovec`
- Description: First 160 chars of event description or default
- OG Image: Event poster if exists, fallback to site default
- OG Type: `article` (event)

---

## ISR Configuration

- Both pages: `revalidate = 60` (1 minute)
- Consistent with news pages

---

## Dependencies

**New packages:**
- `@fullcalendar/core` - Calendar core
- `@fullcalendar/react` - React bindings
- `@fullcalendar/daygrid` - Month grid view

**Existing (reuse):**
- `lucide-react` - Icons
- `date-fns` or `Intl` - Date formatting
